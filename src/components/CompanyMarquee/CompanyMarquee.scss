// Company Marquee Styles - Performance Optimized
.company-marquee {
    padding: 80px 0;
    overflow: hidden;
    position: relative;
    background: #fff;

    // Enhanced CSS containment for better performance isolation
    contain: strict;
    // Content visibility for off-screen optimization
    content-visibility: auto;
    // Optimize for hardware acceleration
    transform: translate3d(0, 0, 0);

    // Container for content
    &__container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        position: relative;
        bottom: 30px;
    }

    // Header section
    &__header {
        text-align: center;
        margin-bottom: 60px;
    }

    &__title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 16px;
        line-height: 1.2;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    &__subtitle {
        font-size: 1.2rem;
        color: #6c757d;
        font-weight: 400;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
    }

    // Marquee track container
    &__track {
        position: relative;
        overflow: hidden;
        width: 100%;
        // Optimized mask using single box-shadow instead of two pseudo-elements
        // This reduces compositing layers significantly
        mask-image: linear-gradient(to right,
                transparent 0%,
                black 100px,
                black calc(100% - 100px),
                transparent 100%);
        -webkit-mask-image: linear-gradient(to right,
                transparent 0%,
                black 100px,
                black calc(100% - 100px),
                transparent 100%);
    }

    // Marquee content container
    &__content {
        display: flex;
        width: max-content;
        will-change: transform;
        // Use hardware acceleration
        transform: translate3d(0, 0, 0);

        // Only animate when visible - performance optimization
        &--animate {
            animation: marquee-scroll 45s linear infinite;
        }

        // Pause animation on hover for better UX
        &:hover {
            animation-play-state: paused;
        }
    }

    // Performance: Disable hover effects during active animation
    &__content--animate &__item {
        pointer-events: auto;

        &:hover {
            // Simplified hover - only scale, no other transforms
            transform: scale(1.05);
        }
    }

    // Individual marquee items
    &__item {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        padding: 0 40px;
        // Optimize transitions - only transform, remove expensive filter
        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        // Removed will-change to reduce compositing layers

        &:hover {
            // Reduced scale for better performance
            transform: scale(1.05);
            // Remove expensive filter operations
        }
    }

    // Logo styles
    &__logo {
        max-height: 60px;
        max-width: 180px;
        width: auto;
        height: auto;
        object-fit: contain;
        // Simplified filter - less expensive
        opacity: 0.85;
        // Optimize transitions - only opacity, remove expensive filters
        transition: opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        // Removed will-change to reduce compositing layers

        &:hover {
            // Only change opacity - much cheaper than grayscale/transform
            opacity: 1;
        }

        // Specific styling for Unit School PNG logo to make it bigger
        &--unit-school {
            max-height: 75px !important;
            max-width: 200px !important;
            opacity: 1;
        }
    }
}

// Keyframes for marquee animation - optimized for hardware acceleration
@keyframes marquee-scroll {
    from {
        transform: translate3d(0, 0, 0);
    }

    to {
        // Adjusted for 2 sets instead of 3 (50% instead of 33.333%)
        transform: translate3d(-50%, 0, 0);
    }
}

// Accessibility: Respect user's motion preferences
@media (prefers-reduced-motion: reduce) {
    .company-marquee {
        &__content {
            animation: none !important;
            // Fallback: show all logos in a static grid
            justify-content: center;
            flex-wrap: wrap;
        }

        &__item {
            transition: none;
        }

        &__logo {
            transition: none;
        }
    }
}

// Tablet styles
@media (max-width: 1024px) {
    .company-marquee {
        padding: 60px 0;

        &__container {
            padding: 0 16px;
        }

        &__title {
            font-size: 2.2rem;
        }

        &__subtitle {
            font-size: 1.1rem;
        }

        &__header {
            margin-bottom: 50px;
        }

        &__item {
            padding: 0 30px;
        }

        &__logo {
            max-height: 50px;
            max-width: 150px;

            // Unit School logo bigger on tablet
            &--unit-school {
                max-height: 62px !important;
                max-width: 170px !important;
            }
        }

        &__track {
            mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 80px,
                    black calc(100% - 80px),
                    transparent 100%);
            -webkit-mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 80px,
                    black calc(100% - 80px),
                    transparent 100%);
        }
    }
}

// Mobile styles
@media (max-width: 784px) {
    .company-marquee {
        padding: 50px 0;

        &__container {
            padding: 0 12px;
        }

        &__title {
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        &__subtitle {
            font-size: 1rem;
            line-height: 1.5;
        }

        &__header {
            margin-bottom: 40px;
        }

        &__item {
            padding: 0 25px;
        }

        &__logo {
            max-height: 40px;
            max-width: 120px;

            // Unit School logo bigger on mobile
            &--unit-school {
                max-height: 50px !important;
                max-width: 140px !important;
            }
        }

        &__content {
            animation-duration: 35s;
        }

        &__track {
            mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 60px,
                    black calc(100% - 60px),
                    transparent 100%);
            -webkit-mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 60px,
                    black calc(100% - 60px),
                    transparent 100%);
        }
    }
}

// iPhone SE and small screens
@media (max-width: 375px) {
    .company-marquee {
        padding: 40px 0;

        &__container {
            padding: 0 8px;
        }

        &__title {
            font-size: 1.6rem;
        }

        &__subtitle {
            font-size: 0.9rem;
        }

        &__header {
            margin-bottom: 30px;
        }

        &__item {
            padding: 0 20px;
        }

        &__logo {
            max-height: 35px;
            max-width: 100px;

            // Unit School logo bigger on small screens
            &--unit-school {
                max-height: 45px !important;
                max-width: 120px !important;
            }
        }

        &__content {
            animation-duration: 30s;
        }

        &__track {
            mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 40px,
                    black calc(100% - 40px),
                    transparent 100%);
            -webkit-mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 40px,
                    black calc(100% - 40px),
                    transparent 100%);
        }
    }
}

// Large screens
@media (min-width: 1400px) {
    .company-marquee {
        padding: 100px 0;

        &__container {
            max-width: 1400px;
        }

        &__title {
            font-size: 3rem;
        }

        &__subtitle {
            font-size: 1.3rem;
        }

        &__header {
            margin-bottom: 80px;
        }

        &__item {
            padding: 0 50px;
        }

        &__logo {
            max-height: 70px;
            max-width: 200px;

            // Unit School logo bigger on large screens
            &--unit-school {
                max-height: 85px !important;
                max-width: 220px !important;
            }
        }

        &__content {
            animation-duration: 50s;
        }

        &__track {
            mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 120px,
                    black calc(100% - 120px),
                    transparent 100%);
            -webkit-mask-image: linear-gradient(to right,
                    transparent 0%,
                    black 120px,
                    black calc(100% - 120px),
                    transparent 100%);
        }
    }
}

// Focus styles for keyboard navigation
.company-marquee {
    &__item {
        &:focus-visible {
            outline: 2px solid #667eea;
            outline-offset: 4px;
            border-radius: 8px;
        }
    }
}